(defwidget datetime []
  (box :class "datetime-widget"
       :orientation "v"
       :space-evenly false
       :valign "center"
       :halign "center"
    (box :class "time"
      :orientation "v"
      :space-evenly true
      (label :text time :class "time-text"))
    (box :class "date"
      :orientation "v"
      :space-evenly true
      (label :text date :class "date-text"))))

(defpoll time :interval "1s"
  :initial "00:00"
  `date +%H:%M`)

(defpoll date :interval "1m"
  :initial "January 01"
  `date "+%A, %d %B"`)

(defwindow datetime
  :monitor 0
  :geometry (geometry :x "20px"
                      :y "120px"
                      :width "600px"
                      :height "150px"
                      :anchor "top right")
  :stacking "bg"
  :exclusive false
  :focusable false
  :namespace "eww-datetime"
  (datetime))

